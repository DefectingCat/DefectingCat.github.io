---
title: çœŸçš„æ˜¯åœ¨å†™ JS - JavaScript çš„ç±»
date: 2020-12-30 11:14:16
tags: JavaScript
categories: ç¬”è®°
url: really-writing-js-javascriptclasses
index_img: /images/çœŸçš„æ˜¯åœ¨å†™JS-JavaScriptçš„ç±»/2020-12-30-11-06-25.webp
---
åœ¨ JavaScript ä¸­æ‰€è°“çš„ç±»ä¸è¿‡æ˜¯ ECMAScript 2015 ä¸ºå…¶å¼•å…¥çš„è¯­æ³•ç³–ã€‚è¿™ä¸ªç³–å®ƒåªæœ‰ç”œå‘³ï¼Œå®ƒæ˜¯æ„é€ å‡½æ•°çš„å¦ä¸€ç§å†™æ³•ï¼Œç±»è¯­æ³•**ä¸ä¼š**ä¸º JavaScript å¼•å…¥æ–°çš„é¢å‘å¯¹è±¡çš„ç»§æ‰¿æ¨¡å‹ã€‚

åœ¨ä¹‹å‰å­¦ä¹  [JSé¢å‘å¯¹è±¡](https://www.defectink.com/defect/javascript-object-oriented-programming.html) çš„ç¼–ç¨‹æ—¶ï¼Œè¯¦ç»†çš„ç ”ç©¶è¿‡äº†å…³äº JavaScript æ„é€ å‡½æ•°ä»¥åŠç»§æ‰¿çš„é—®é¢˜ã€‚ä»å·¥å‚æ¨¡å¼ä¸€ç›´å‘å±•è‡³ä»Šçš„å¯„ç”Ÿå¼ç»§æ‰¿ï¼Œä¹Ÿè§£å†³äº†å¾ˆå¤šè¯­è¨€æœ¬æœ‰çš„é—®é¢˜ã€‚è™½ç„¶ç±»åªæ˜¯ä¸ªè¯­æ³•ç³–ï¼Œä½†æ˜¯ä»å¾ˆå¤šåœ°æ–¹æ¥è¯´å®ƒä¹Ÿè§£å†³äº†å…³äºæ„é€ å‡½æ•°ç»§æ‰¿ç­‰çš„å¤æ‚å†™æ³•ã€‚

## ğŸ“å®šä¹‰ç±»

ç±»å®é™…ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œå°†åƒå‡½æ•°èƒ½å¤Ÿå®šä¹‰çš„å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜ä¸€æ ·ï¼Œç±»è¯­æ³•æœ‰ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼šç±»è¡¨è¾¾å¼å’Œç±»å£°æ˜ã€‚

### å£°æ˜

å®šä¹‰ä¸€ä¸ªç±»çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªç±»å£°æ˜ï¼Œè¦å£°æ˜ä¸€ä¸ªç±»ï¼Œå¯ä»¥ä½¿ç”¨å¸¦æœ‰`class`å…³é”®å­—çš„ç±»åã€‚ä¸€ä¸ªç±»çœ‹ä¸Šå»åƒè¿™æ ·ï¼š

```js
class Person {
    constructor (name, age) {
        this.name = name;
        this.age = age;
    }
    
    otherFunc() {
        console.log(name + age);
    }
}
```

è¿™å’Œä¸€äº›å¸¸è§çš„è¯­è¨€ï¼Œä¾‹å¦‚ Cè‰¹ å’Œ Java è¾ƒä¸ºç±»ä¼¼ã€‚ç›¸æ¯”è¾ƒä¹‹ä¸‹ï¼Œä¼ ç»Ÿçš„ JavaScript æ„é€ å‡½æ•°å¯¹äºå…¶ä»–çš„é¢å‘å¯¹è±¡è¯­è¨€çš„ç¨‹åºå‘˜å¯èƒ½ä¸å¤ªå®¹æ˜“ç†è§£ï¼Œæ¥å›é¡¾ä¸‹ä¼ ç»Ÿçš„æ„é€ å‡½æ•°ã€‚

```js
function Person(name, age) {
    this.name = name;
    this.age = age;
}

Person.prototype.otherFunc() {
    console.log(name + age);
}
```

ç›¸è¾ƒäºæœ€ä¼ ç»Ÿçš„æ„é€ å‡½æ•°æ¥è¯´ï¼Œç±»çš„å£°æ˜æ–¹å¼ä¼šæ›´è®©äººå®¹æ˜“ç†è§£ã€‚è™½ç„¶å£°æ˜çœ‹ä¸Šå»åªæ˜¯æ¢äº†ç§å†™æ³•ï¼ˆç¡®å®å°±æ˜¯æ¢äº†ç§å†™æ³•ï¼ŒåŒ…æ‹¬ç»§æ‰¿ï¼‰ï¼Œä½†æ˜¯å¯¹äºç»§æ‰¿ç­‰æ“ä½œæ¥è¯´ï¼Œ`class`ç±»çš„æ–¹å¼çœäº†ä¸å°‘äº‹ã€‚

### æå‡

å‡½æ•°å£°æ˜å’Œç±»å£°æ˜ä¹‹é—´çš„ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯å‡½æ•°å£°æ˜ä¼šæå‡ï¼Œè€Œç±»å£°æ˜ä¸ä¼šã€‚å’Œæ–°å…³é”®å­—`let`ã€`const`ç­‰ä¸€æ ·ï¼Œç±»éœ€è¦å…ˆå£°æ˜å†ä½¿ç”¨ã€‚

```js
let xfy = new Person();     // ReferenceError

class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
}
```

å¦åˆ™å°±ä¼šæŠ›å‡ºä¸€ä¸ª ReferenceErrorï¼ˆå¼•ç”¨é”™è¯¯ï¼‰ã€‚

### ç±»è¡¨è¾¾å¼

å’Œå‡½æ•°ä¸€æ ·ï¼Œä¸€ä¸ªç±»è¡¨è¾¾å¼æ˜¯å®šä¹‰ä¸€ä¸ªç±»çš„å¦ä¸€ç§æ–¹å¼ã€‚ç±»è¡¨è¾¾å¼å¯ä»¥æ˜¯å…·åçš„æˆ–åŒ¿åçš„ã€‚

```js
// åŒ¿åç±»
let Person = class {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
}

console.log(Person.name);   // Person

// å…·åç±»
let Person = class Persona {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
}

console.log(Person.name);   // Persona
```

ä¸€ä¸ªå…·åç±»è¡¨è¾¾å¼çš„åç§°æ˜¯ç±»å†…çš„ä¸€ä¸ªå±€éƒ¨å±æ€§ï¼Œå®ƒå¯ä»¥é€šè¿‡ç±»æœ¬èº«ï¼ˆè€Œä¸æ˜¯ç±»å®ä¾‹ï¼‰çš„ name å±æ€§æ¥è·å–ã€‚

> ç±»è¡¨è¾¾å¼ä¹ŸåŒæ ·å—åˆ°ç±»å£°æ˜ä¸­æåˆ°çš„ç±»å‹æå‡çš„é™åˆ¶ã€‚

## ç±»ä½“å’Œæ–¹æ³•å®šä¹‰

ä¸€ä¸ªç±»çš„ç±»ä½“æ˜¯ä¸€å¯¹èŠ±æ‹¬å·/å¤§æ‹¬å·`{}`ä¸­çš„éƒ¨åˆ†ã€‚è¿™æ˜¯å®šä¹‰ç±»æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æ–¹æ³•æˆ–æ„é€ å‡½æ•°ã€‚

### ä¸¥æ ¼æ¨¡å¼

ç±»å£°æ˜å’Œç±»è¡¨è¾¾å¼çš„ä¸»ä½“éƒ½åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œã€‚æ¯”å¦‚ï¼Œæ„é€ å‡½æ•°ï¼Œé™æ€æ–¹æ³•ï¼ŒåŸå‹æ–¹æ³•ï¼Œgetter å’Œ setter éƒ½åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œã€‚

### æ„é€ å‡½æ•°

`constructor`æ–¹æ³•æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ä¸ªç”±`class`åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ã€‚ä¸€ä¸ªç±»åªèƒ½æ‹¥æœ‰ä¸€ä¸ªåä¸º`constructor`çš„ç‰¹æ®Šæ–¹æ³•ã€‚å¦‚æœç±»åŒ…å«å¤šä¸ª`constructor`çš„æ–¹æ³•ï¼Œåˆ™å°†æŠ›å‡ºä¸€ä¸ª`SyntaxError`ã€‚

ä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥ä½¿ç”¨`super`å…³é”®å­—æ¥è°ƒç”¨ä¸€ä¸ªçˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

### åŸå‹æ–¹æ³•

åŸå‹æ–¹æ³•ä¸ä½¿ç”¨ä¼ ç»Ÿçš„æ„é€ å‡½æ•°æ–¹æ³•å®ç°çš„æ•ˆæœä¸€æ ·ã€‚ä¸è¿‡ class ä½¿ç”¨çš„æ˜¯æ–¹æ³•å®šä¹‰ï¼šä» ECMAScript 2015 å¼€å§‹ï¼Œåœ¨å¯¹è±¡åˆå§‹å™¨ä¸­å¼•å…¥äº†ä¸€ç§æ›´ç®€çŸ­å®šä¹‰æ–¹æ³•çš„è¯­æ³•ï¼Œè¿™æ˜¯ä¸€ç§æŠŠæ–¹æ³•åç›´æ¥èµ‹ç»™å‡½æ•°çš„ç®€å†™æ–¹å¼ã€‚

```js
class Rectangle {
    // æ„é€ å‡½æ•°
    constructor(h, w) {
        this.h = h;
        this.w = w;
    }
    // get
    get area() {
        return this.calcArea();
    }
    // è‡ªå®šä¹‰æ–¹æ³•
    calcArea() {
        return this.h * this.w;
    }
}

let square = new Rectangle(23, 32);
console.log(square.area) // 736
```

ä½¿ç”¨ç±»çš„æ–¹å¼æ¥å†™è¿™ä¸ªåŸå‹æ–¹æ³•ä½¿å…¶çœ‹ä¸Šå»æ›´åŠ ç±»ä¼¼äºä¸€äº›å¸¸è§çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ã€‚å½“ç„¶ï¼Œç±»ä¸ä¼šä¸º JavaScript å¼•å…¥æ–°çš„ç»§æ‰¿æ¨¡å‹ï¼Œæ‰€ä»¥ä¸Šè¿°ç”±ç±»å†™çš„åŸå‹æ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„æ„é€ å‡½æ•°æ¥å†™ã€‚ä¸è¿‡å°±æ˜¯çœ‹ä¸Šå»å’Œå¸¸è§çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸å¤ªä¸€æ ·è€Œå·²ã€‚

```js
// æ„é€ å‡½æ•°
function Rectangle(h, w) {
    this.h = h;
    this.w = w;
}

// è‡ªå®šä¹‰æ–¹æ³•
Rectangle.prototype.calcArea = function() {
    return this.h * this.w;
}

// get
Object.defineProperty(Rectangle.prototype, 'area', {
    get: function() {
        return this.calcArea();
    }
})

let square = new Rectangle(23, 32);
console.log(square.area);   // 736
```

### é™æ€æ–¹æ³•

`static`å…³é”®å­—ç”¨äºå®šä¹‰ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•ã€‚è°ƒç”¨é™æ€æ–¹æ³•ä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»ï¼Œä½†ä¸èƒ½é€šè¿‡ä¸€ä¸ªç±»å®ä¾‹æ¥è°ƒç”¨é™æ€æ–¹æ³•ã€‚

é€šå¸¸ï¼Œä¸€ä¸ªå‡½æ•°ä¹Ÿæ˜¯åŸºäºå¯¹è±¡çš„ï¼Œæ‰€ä»¥å‡½æ•°ä¹Ÿæœ‰è‡ªå·±çš„å±æ€§ï¼Œå‡½æ•°çš„`prototype`å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚è€Œä¸€ä¸ªç±»ä¸­çš„é™æ€æ–¹æ³•å°±ç›¸å½“äºç»™è¿™ä¸ªæ„é€ å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªå®ƒè‡ªå·±çš„å±æ€§ã€‚ä¸æ˜¯åœ¨`prototype`ä¸Šçš„å±æ€§æ˜¯ä¸ä¼šç»§æ‰¿åˆ°å®ä¾‹ä¸Šçš„ã€‚

```js
class test {
    constructor(xx, yy) {
        this.x = xx;
        this.y = yy;
    }

    add() {
        return this.x + this.y;
    }

    static tt() {
        return 'å˜¤å˜¤å˜¤';
    }
}
```

```js
test.tt()
"å˜¤å˜¤å˜¤"
```

é™æ€æ–¹æ³•ç±»ä¼¼äºå°†ä¸€ä¸ªæ„é€ å‡½æ•°ç›´æ¥ç”¨ä½œäºä¸€ä¸ªå·¥å…·å‡½æ•°ã€‚

### åŸå‹å’Œé™æ€æ–¹æ³•åŒ…è£…

åœ¨`class`ä½“å†…éƒ¨æ‰§è¡Œçš„ä»£ç æ€»æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œï¼Œå³ä½¿æ²¡æœ‰è®¾ç½®`'use strict'`ã€‚æ‰€ä»¥å½“è°ƒç”¨é™æ€æˆ–åŸå‹æ–¹æ³•æ—¶æ²¡æœ‰æŒ‡å®š`this`çš„å€¼ï¼Œé‚£ä¹ˆæ–¹æ³•å†…çš„`this`å€¼å°†è¢«ç½®ä¸º`undefined`ã€‚

```js
class test {
    constructor(x, y) {
        this.x = x;
        this.y = y;
    }

    show() {
        return this;
    }

    static ss() {
        return this;
    }
}
```

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„è¿”å›`this`çš„å‡½æ•°ï¼Œå®ƒæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ç»§æ‰¿ç»™å®ä¾‹çš„å±æ€§å’Œé™æ€æ–¹æ³•ã€‚è‹¥`this`çš„ä¼ å…¥å€¼ä¸º`undefined`ï¼Œåˆ™åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ä¼šå‘ç”Ÿè‡ªåŠ¨è£…ç®±ï¼Œ`this`çš„è¿”å›å€¼æ˜¯`undefined`ã€‚

```js
let xfy = new test();
xfy.show();
let t = xfy.show;
t(); // undefined

test.ss()
let tt = test.ss;
tt(); // undefined
```

è€Œåœ¨ä¼ ç»Ÿçš„æ„é€ å‡½æ•°å†™æ³•ä¸‹ï¼Œ`this`çš„å€¼ä¼šå‘ç”Ÿè‡ªåŠ¨è£…ç®±ï¼Œå°†æŒ‡å‘å…¨å±€å¯¹è±¡

```js
function Test(x, y) {
    this.x = x;
    this.y = y;
}

Test.prototype.show = function () {
    return this;
}

Test.ss = function () {
    return this;
}

let xfy = new Test();
xfy.show();
let t = xfy.show;
t(); // Global Object

Test.ss()
let tt = Test.ss;
tt(); // Global Object
```

### å®ä¾‹å±æ€§

å®ä¾‹çš„å±æ€§å¿…é¡»å®šä¹‰åœ¨ç±»çš„`constructor`æ–¹æ³•é‡Œ

```js
class test() {
    constructor(h, w) {
        this.w = w;
        this.h = h;
    }
}
```

## å­—æ®µå£°æ˜

> å…¬å…±å’Œç§æœ‰å­—æ®µå£°æ˜æ˜¯JavaScriptæ ‡å‡†å§”å‘˜ä¼š [TC39](https://tc39.es/) æå‡ºçš„ [å®éªŒæ€§åŠŸèƒ½ï¼ˆç¬¬3é˜¶æ®µï¼‰](https://github.com/tc39/proposal-class-fields) ã€‚æµè§ˆå™¨ä¸­çš„æ”¯æŒæ˜¯æœ‰é™çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ [Babel](https://babeljs.io/) ç­‰ç³»ç»Ÿæ„å»ºåä½¿ç”¨æ­¤åŠŸèƒ½ã€‚

### å…¬æœ‰å­—æ®µå£°æ˜

class æä¾›äº†å£°æ˜å…¬æœ‰å­—æ®µçš„æ–¹æ³•ï¼Œé€šè¿‡é¢„å…ˆå£°æ˜å­—æ®µï¼Œç±»å®šä¹‰å˜å¾—æ›´åŠ è‡ªæˆ‘è®°å½•ï¼Œå¹¶ä¸”å­—æ®µå§‹ç»ˆå­˜åœ¨ã€‚

```js
class Rectangle {
    x;
    constructor(height, width) {
        this.height = height;
        this.width = width;
    }
    static y = 1;
    clicked() {
        this.x++;
    }
}

let square = new Rectangle(123, 33);
```

æ­£å¦‚ä¸Šé¢çœ‹åˆ°çš„ï¼Œè¿™ä¸ªå­—æ®µå¯ä»¥ç”¨ä¹Ÿå¯ä»¥ä¸ç”¨é»˜è®¤å€¼æ¥å£°æ˜ã€‚

å…±æœ‰å­—æ®µé‡è¦çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬ä¼šåœ¨æ¯ä¸ªç‹¬ç«‹å¯¹è±¡ä¸­è¢«è®¾å¥½ï¼Œè€Œä¸æ˜¯è®¾åœ¨`prototype`ä¸­ã€‚

```js
Rectangle.prototype.x   // undefined
```

### ç§æœ‰å­—æ®µå£°æ˜

ä»ç±»å¤–éƒ¨å¼•ç”¨ç§æœ‰å­—æ®µæ˜¯é”™è¯¯çš„ã€‚å®ƒä»¬åªèƒ½åœ¨ç±»é‡Œé¢ä¸­è¯»å–æˆ–å†™å…¥ã€‚é€šè¿‡å®šä¹‰åœ¨ç±»å¤–éƒ¨ä¸å¯è§çš„å†…å®¹ï¼Œå¯ä»¥ç¡®ä¿ç±»çš„ç”¨æˆ·ä¸ä¼šä¾èµ–äºå†…éƒ¨ï¼Œå› ä¸ºå†…éƒ¨å¯èƒ½åœ¨ä¸åŒç‰ˆæœ¬ä¹‹é—´å‘ç”Ÿå˜åŒ–ã€‚

ç§æœ‰å­—æ®µä»å¤§ä½¬ä»¬ä¹‹é—´å…±æœ‰çº¦å®šçš„ä¸‹åˆ’çº¿ï¼Œç°åœ¨å·²ç»æ¢ä¸ºè‰æ¡ˆä¸­çš„`#`äº†ã€‚

```js
class Rectangle {
    #x;
    #width;
    #height;
    constructor(w, h) {
        this.#width = w;
        this.#height = h;
    }
    get area() {
        return this.#width * this.#height;
    }
}

let s = new Rectangle(12, 33);
```

> ç§æœ‰å­—æ®µå¿…é¡»å…ˆåœ¨ç±»ä¸­å£°æ˜ã€‚

## ä½¿ç”¨`extends`æ‰©å±•å­ç±»

`extends`å…³é”®å­—åœ¨*ç±»å£°æ˜*æˆ–*ç±»è¡¨è¾¾å¼*ä¸­ç”¨äºåˆ›å»ºä¸€ä¸ªç±»ä½œä¸ºå¦ä¸€ä¸ªç±»çš„ä¸€ä¸ªå­ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»§æ‰¿ã€‚ECMAScript 2015 çš„ç»§æ‰¿ç»ˆäºå˜çš„æ›´åŠ ç›´è§‚äº†ã€‚

```js
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }

    sayName() {
        return this.name;
    }

    get newYear() {
        return ++this.age;
    }
}

class Student extends Person {
    constructor(name, age, classes) {
        super(name, age);
        this.classes = classes;
    }
}
```

ä¸éœ€è¦å†æ‰‹åŠ¨å†™ä¸€ä¸ªç”¨äºç»§æ‰¿çš„å‡½æ•°äº†ï¼Œä¹Ÿä¸éœ€è¦å†ä½¿ç”¨`call`äº†ï¼Œåœ¨å­ç±»ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨`super()`æ–¹æ³•æ¥æŒ‡å‘è¶…ç±»çš„`this`ã€‚

å½“ç„¶ï¼Œå› ä¸ºæ˜¯è¯­æ³•ç³–ï¼Œæ‰€ä»¥`extends`ä¹Ÿå¯ä»¥ç»§æ‰¿ä¼ ç»ŸåŸºäºå‡½æ•°çš„â€œç±»â€ï¼š

```js
function Person(name, age) {
    this.name = name;
    this.age = age;
}

Person.prototype.sayName = function () {
    return this.name;
}

Object.defineProperty(Person.prototype, 'newYear', {
    get: function () {
        return ++this.age;
    }
})

class Student extends Person {
    constructor(name, age, classess) {
        super(name, age);
        this.classess = classess;
    }

    sayAge() {
        return this.age;
    }
}
```

é™¤äº†åŸºäºå‡½æ•°çš„â€œç±»â€ï¼Œå…¶ä»–ç”¨æ³•è¿˜æ˜¯ä¸€æ¨¡ä¸€æ ·ã€‚

**ä½†æ˜¯**ï¼Œç±»æ— æ³•ç»§æ‰¿å¸¸è§„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯éæ„é€ å‡½æ•°çš„`prototype`ï¼Œæˆ–è€…è¯´ä¸å¯æ„é€ çš„å¸¸è§„å¯¹è±¡ã€‚å¦‚æœéœ€è¦ç»§æ‰¿ï¼Œå¯ä»¥ä½¿ç”¨`Object.setPrototypeOf()`æ–¹æ³•ã€‚

```js
class Student {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
}

let someOne= {
    sayName() {
        return this.name;
    }
}

Object.setPrototypeOf(Student.prototype, someOne);

let p = new Student('xfy', 18);
```

åˆè§åˆ°è€æœ‹å‹`prototype`äº†ã€‚

### Species

å¦‚æœæˆ‘ä»¬æƒ³åœ¨ä¸€ä¸ªæ´¾ç”Ÿå‡ºæ•°ç»„çš„æ„é€ å‡½æ•°ä¸­è¿”å› Array å¯¹è±¡ï¼Œé‚£ä¹ˆ Species å…è®¸æˆ‘ä»¬è¦†ç›–é»˜è®¤çš„æ„é€ å‡½æ•°

```js
class MyArray extends Array {
    static get [Symbol.species]() {
        return Array;
    }
}

let a = new MyArray(1,2,3,4);
```

## ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–

å‰é¢æœ‰æåˆ°è¿‡ï¼Œclass ä¸è¿‡æ˜¯æ–°çš„è¯­æ³•ç³–ã€‚æ‰€è°“çš„è¯­æ³•ç³–ï¼Œå°±æ˜¯æ—¨åœ¨ä¸å¢åŠ è¯­æ³•çš„æƒ…å†µä¸‹ï¼Œä½¿å¾—ä»£ç å†…å®¹æ›´åŠ å®¹æ˜“é˜…è¯»ã€‚æ ¹æ®å‰é¢çš„ä¸€äº›å®ä¾‹ï¼Œå¯ä»¥å‘ç° class å®Œå…¨å¯ä»¥ä½¿ç”¨ä»¥å‰çš„çº¯å‡½æ•°æ¥å†™å‡ºç›¸åŒçš„å†…å®¹ã€‚

ä¸è¿‡ä»–ä»¬ä¹Ÿæœ‰ä¸€äº›é‡å¤§å·®å¼‚ï¼š

1. `class` åˆ›å»ºçš„å‡½æ•°å…·æœ‰ç‰¹æ®Šçš„å†…éƒ¨å±æ€§æ ‡è®° `[[FunctionKind]]:"classConstructor"`ã€‚æ‰€ä»¥å®ƒä¸æ‰‹åŠ¨åˆ›å»ºæ„é€ å‡½æ•°å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œå¹¶ä¸” JavaScript ä¼šåœ¨å¾ˆå¤šåœ°æ–¹æ£€æŸ¥è¯¥å±æ€§ã€‚ä¾‹å¦‚ç±»æ— æ³•å½“ä½œæ™®é€šå‡½æ•°æ¥ä½¿ç”¨ï¼Œå¿…é¡»é…åˆ`new`æ“ä½œç¬¦æ¥ä½¿ç”¨ï¼š

```js
Error: Class constructor User cannot be invoked without 'new'
```

2. ç±»çš„æ–¹æ³•ä¸å¯æšä¸¾ï¼Œç±»å®šä¹‰å°† `"prototype"` ä¸­çš„æ‰€æœ‰æ–¹æ³•çš„ `enumerable` æ ‡å¿—è®¾ç½®ä¸º `false`ã€‚æ‰€ä»¥å½“ä½¿ç”¨`for/in`æ–¹æ³•æ—¶ï¼Œç±»çš„æ–¹æ³•æ˜¯ä¸ä¼šè¢«æšä¸¾å‡ºæ¥çš„ã€‚

3. ç±»æ€»æ˜¯ä½¿ç”¨`use strict`ï¼Œç±»ä¸­çš„æ‰€æœ‰ä»£ç éƒ½æ˜¯ä¸¥æ ¼æ¨¡å¼ã€‚æ‰€ä»¥ä¹Ÿä¸ä¼šå¯¼è‡´ this çš„è‡ªåŠ¨è£…ç®±ã€‚
4. å‡½æ•°çš„å£°æ˜ä¼šæå‡ï¼Œç±»çš„å£°æ˜ä¸ä¼šã€‚
5. `class`å†…åˆ›å»ºçš„æ–¹æ³•æ—¢èƒ½ç»§æ‰¿ä½œç”¨åŸŸé“¾ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åœ¨ prototype ä¸Šï¼Œä¸ä¼šä¸ºæ¯ä¸ªå®ä¾‹åˆ›å»ºåŒåä¸ç›¸åŒçš„æ–¹æ³•ã€‚

## å‚è€ƒ

* https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes
* https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/Class_elements
* https://zh.javascript.info/class

å¤´å›¾æ¥è‡ªï¼š[Classes in JavaScript](https://dev.to/samanthaming/classes-in-javascript-30n8)