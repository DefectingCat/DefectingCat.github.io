最早期 IE4 为 JavaScript 引入了拖放功能。当时只有两样东西可以拖放：图片和文本。现代 HTML5 规范在后续 IE 的拖放实现基础上标准化了拖放功能，目前所有主流浏览器都支持拖放功能。

拖放图片到指定的容器中，实现上传图片的功能在现代互联网已经是非常常见的功能。其主要实现手段就是利用了 JavaScript 原生拖放 API 与 File API。

## 主要思路

主要的上传功能不仅仅只包含一种上传的方式，还需要涵盖下目前主流浏览器支持良好的几种方式。分别有：拖拽、粘贴和手动选择图片。

所以主要的思路就是将上传的区域分成两个部分，一个是监听拖拽和粘贴的盒子；另一个是手动选择文件的`input[file]`按钮。

盒子分别监听拖放事件 和 粘贴事件，input 就只需要监听一个 change 事件。

还有个值得注意下的 API 就是 Blob 和 `window.URL.createObjectURL`。成功获取到用户选择的图片时，得到的就是一个 Blob 对象。

以前常见的展示方式是利用 FileReader 实例来读取图片，将其转换为 base64 给 `img` 标签展示图片。这种方法对内存没有过多的占用，兼容性也很好，缺点就是大一点的图片计算 base64 需要点时间，可能会阻塞当前进程（很短）。

还有一种方式就是利用  `window.URL.createObjectURL` 来将 Blob 或 File 对象创建一个对象 URL。这个函数返回一个指向内存中地址的字符串，且这个字符串是 URL，所以可以直接给 `img` 使用，不需要任何计算。缺点就是只要这个对象 URL 在使用中，就不能释放内存。最好在使用完了就立即手动释放它。

## 基本结构

